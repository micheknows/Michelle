<!-- templates/tpt/createraces.html -->

{% extends '/tpt/createtpt.html' %}

{% block tpt_content %}

<h1>Create R.A.C.E.S. Writing Packets</h1>

<form>
  <div class="form-group">
    <label for="gradeLevel">Grade Level</label>
    <select class="form-control" id="gradeLevel">
      <option>K</option>
      <option>1</option>
      <option>2</option>
      <option>3</option>
      <option>4</option>
      <option>5</option>
      <option>6</option>
      <option>7</option>
      <option>8</option>
      <option>9</option>
      <option>10</option>
      <option>11</option>
      <option>12</option>
    </select>
  </div>

  <div class="form-group">
    <label for="month">Month</label>
    <select class="form-control" id="month">
      <option>January</option>
      <option>February</option>
      <option>March</option>
      <option>April</option>
      <option>May</option>
      <option>June</option>
      <option>July</option>
      <option>August</option>
      <option>September</option>
      <option>October</option>
      <option>November</option>
      <option>December</option>
    </select>
  </div>

  <button type="submit" class="btn btn-primary">Submit</button>
</form>

    <button id="getDaysBtn" type="button" class="btn btn-primary">Get Special Days</button>

<div id="specialDays" style="display: none;">
  <h3>Special Days for <span id="monthName">Month</span></h3>

  <ul id="daysList" class="list-group">
  </ul>

  <button id="addDayBtn" type="button" class="btn btn-secondary">Add Day</button>

  <button id="approveBtn" type="button" class="btn btn-success">Approve</button>
</div>

<script>

// ChatGPT API settings
const API_KEY = "xxx";
const API_URL = "https://api.chatgpt.com";

// Get Special Days button click
document.getElementById("getDaysBtn").addEventListener("click", async function() {

  // Call API
  const response = await fetch(API_URL, {
    headers: {
      Authorization: `Bearer ${API_KEY}`
    },
    method: 'POST',
    body: {
      prompt: "Provide a list of holidays and special days for January"
    }
  });

  const days = await response.text();

  // Populate list
  populateDaysList(days.split("\n"));

  // Show list
  document.getElementById("specialDays").style.display = "block";

});

// Populate days list
function populateDaysList(days) {
  let list = "";

  days.forEach(day => {
    list += `<li class="list-group-item">${day}</li>`
  });

  document.getElementById("daysList").innerHTML = list;
}

</script>


{% endblock %}